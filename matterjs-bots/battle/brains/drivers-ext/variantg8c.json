{
    "id": "variantg8c",
    "key": false,
    "name": "Variantg8c",
    "team": "variantg8c",
    "brain": "var s=context.state,a=context.action,m=context.memory;\nvar PI2=Math.PI*2,PI=Math.PI;\n\nif(!m.t){m.t=0;m.lf=-99;m.ev=1;m.dir=1;m.fired=0;m.tgt=false;}\nm.t++;\n\nvar clamp=function(v,lo,hi){return Math.max(lo,Math.min(hi,v));};\nvar angDiff=function(a,b){var d=(a-b)%PI2;if(d>PI)d-=PI2;if(d<-PI)d+=PI2;return d;};\nvar angTo=function(x1,y1,x2,y2){return Math.atan2(y2-y1,x2-x1);};\nvar dst=function(x1,y1,x2,y2){return Math.sqrt((x2-x1)*(x2-x1)+(y2-y1)*(y2-y1));};\n\nvar myX=s.position.x,myY=s.position.y,myA=s.angle;\nvar dCenter=dst(myX,myY,450,450);\nvar toCenter=s.angleToCenter;\nvar r=context.round;\n\nvar enemy=false;var bestEDist=9999;var memorizedTarget=false;\nfor(var i=0;i<s.scanner.robot.length;i++){\n  var rb=s.scanner.robot[i];\n  if(rb.active&&rb.team!==s.team){\n    if(m.tgt&&rb.name===m.tgt){memorizedTarget=rb;}\n    var eDist=dst(rb.x,rb.y,450,450);\n    if(eDist<bestEDist){bestEDist=eDist;enemy=rb;}\n  }\n}\nif(memorizedTarget&&memorizedTarget.range<350){enemy=memorizedTarget;}\nif(enemy){m.tgt=enemy.name;}else{m.tgt=false;}\n\nvar eProj=s.scanner.projectile[0]||false;\nvar prox=s.proximity[0]||false;\nvar teammate=false;\nfor(var i=0;i<s.proximity.length;i++){\n  var p=s.proximity[i];\n  if(p.entityType==='robot'&&p.range<50){teammate=p;break;}\n}\n\nvar endgame=(r.remaining<15);\nvar finalStand=(r.remaining<7);\n\nif(m.fired){a.desiredForce=s.maxForce*0.5;m.fired=0;}\n\nvar velAngle=s.angle;\nvar velToCenter=Math.cos(angDiff(velAngle,toCenter));\n\nif(dCenter>160){\n  a.desiredAngle=toCenter;a.desiredForce=s.maxForce*0.9;a.desiredScan=120;\n}else if(dCenter>50){\n  a.desiredAngle=toCenter+m.dir*0.3;\n  if(velToCenter<-0.3){a.desiredForce=s.maxForce*0.4;}\n  else{a.desiredForce=s.maxForce*0.25;}\n  a.desiredScan=180;\n}else{\n  if(!enemy){a.desiredScan=(m.t%6<3)?50:300;}\n  else{a.desiredScan=250;}\n  if(velToCenter<-0.5&&dCenter>20){\n    a.desiredAngle=toCenter;a.desiredForce=s.maxForce*0.15;\n  }else{\n    a.desiredAngle=myA+m.dir*0.04;a.desiredForce=s.maxForce*0.03;\n  }\n  if(m.t%80===0)m.dir=-m.dir;\n}\n\nif(!endgame){\n  if(teammate&&teammate.range<40){\n    var awayAngle=(teammate.angleFromRobot+PI)%PI2;\n    a.desiredAngle=awayAngle;a.desiredForce=s.maxForce*0.5;\n  }\n  if(eProj&&eProj.range<120){\n    var incoming=(eProj.angleFromRobot+PI)%PI2;\n    var pDiff=Math.abs(angDiff(eProj.angle,incoming));\n    if(pDiff<0.6){\n      var perpL=eProj.angleFromRobot+PI/2;var perpR=eProj.angleFromRobot-PI/2;\n      var dL=Math.abs(angDiff(perpL,toCenter));var dR=Math.abs(angDiff(perpR,toCenter));\n      a.desiredAngle=(dL<dR)?perpL:perpR;a.desiredForce=s.maxForce;m.ev=-m.ev;\n    }\n  }\n  if(enemy){\n    var range=enemy.range;\n    a.desiredScan=clamp(range*0.9,80,350);\n    var projSpeed=42;\n    var tF=range/projSpeed;\n    var pX=enemy.x+enemy.speed*Math.cos(enemy.angle)*tF;\n    var pY=enemy.y+enemy.speed*Math.sin(enemy.angle)*tF;\n    var lA=angTo(myX,myY,pX,pY);\n    a.desiredAngle=lA;\n    var aimErr=Math.abs(angDiff(myA,lA));\n    var tgtWidth=Math.atan2(28,range);var since=m.t-m.lf;\n    if(aimErr<tgtWidth&&since>=30){a.desiredLaunch=true;m.lf=m.t;m.ev=-m.ev;m.fired=1;}\n    if(range<130){a.desiredForce=-s.maxForce*0.4;}\n    else if(range>300){a.desiredForce=s.maxForce*0.5;}\n    else if(dCenter>40){\n      var dotToCenter=Math.cos(angDiff(lA,toCenter));\n      if(dotToCenter>0){a.desiredForce=s.maxForce*0.25;}\n      else{a.desiredForce=-s.maxForce*0.2;}\n    }else{a.desiredForce=s.maxForce*0.03;}\n  }\n}else if(!finalStand){\n  if(dCenter>15){a.desiredAngle=toCenter;a.desiredForce=s.maxForce;}\n  else{a.desiredForce=0;}\n  a.desiredScan=150;\n  if(eProj&&eProj.range<100){\n    var incoming=(eProj.angleFromRobot+PI)%PI2;\n    var pDiff=Math.abs(angDiff(eProj.angle,incoming));\n    if(pDiff<0.5){\n      var perpL=eProj.angleFromRobot+PI/2;var perpR=eProj.angleFromRobot-PI/2;\n      var dL=Math.abs(angDiff(perpL,toCenter));var dR=Math.abs(angDiff(perpR,toCenter));\n      a.desiredAngle=(dL<dR)?perpL:perpR;a.desiredForce=s.maxForce*0.8;\n    }\n  }\n  if(enemy){\n    var lA2=angTo(myX,myY,enemy.x,enemy.y);\n    var aimErr2=Math.abs(angDiff(myA,lA2));\n    if(aimErr2<0.15&&(m.t-m.lf)>=30){a.desiredLaunch=true;m.lf=m.t;m.fired=1;}\n  }\n}else{\n  if(dCenter>3){a.desiredAngle=toCenter;a.desiredForce=clamp(dCenter/50,0.05,1)*s.maxForce;}\n  else{a.desiredAngle=false;a.desiredForce=0;}\n}\n\nif(prox&&prox.entityType==='wall'&&prox.range<35){a.desiredAngle=toCenter;a.desiredForce=s.maxForce;}\nif(myX<55||myX>845||myY<55||myY>845){a.desiredAngle=toCenter;a.desiredForce=s.maxForce;}",
    "version": 1,
    "updated": "2026-02-28T09:39:33.544Z",
    "oldBrains": []
}